# 空気線図アプリケーション

空調設計のための空気線図（湿り空気線図）を描画・編集できるWebアプリケーションです。

## 機能

### 現在実装済み（Phase 1）
- ✅ 空気線図の基本描画（相対湿度曲線、湿球温度線、エンタルピー線）
- ✅ 状態点のプロット・表示
- ✅ 状態点のドラッグ移動
- ✅ 夏季/冬季の切り替え表示
- ✅ 基本的な空気物性計算（温度、湿度、エンタルピー等）
- ✅ プリセット条件（外気、室内）の追加

### 今後実装予定
- ⬜ プロセス線の追加・編集（加熱、冷却、加湿、混合、全熱交換等）
- ⬜ コイル能力の自動計算・表示
- ⬜ 状態点とプロセスの順序変更（ドラッグ&ドロップ）
- ⬜ 設計条件表の編集
- ⬜ PDF/画像エクスポート
- ⬜ プロジェクトの保存・読み込み

## 技術スタック

- **フロントエンド**: React 18 + TypeScript
- **状態管理**: Zustand
- **スタイリング**: Tailwind CSS
- **描画**: HTML5 Canvas
- **ビルドツール**: Vite
- **デプロイ**: Vercel対応

## セットアップ

### 前提条件
- Node.js 18以上
- npm または yarn

### インストール

```bash
# 依存パッケージのインストール
npm install

# 開発サーバーの起動
npm run dev

# ビルド
npm run build

# プレビュー
npm run preview
```

### Vercelへのデプロイ

```bash
# Vercel CLIのインストール（初回のみ）
npm i -g vercel

# デプロイ
vercel
```

または、GitHubリポジトリと連携してVercelダッシュボードから自動デプロイ。

## プロジェクト構造

```
src/
├── types/              # TypeScript型定義
│   ├── psychrometric.ts
│   ├── process.ts
│   └── designConditions.ts
│
├── lib/                # コアロジック
│   ├── psychrometric/  # 空気物性計算
│   ├── processes/      # プロセス計算
│   ├── equipment/      # 機器能力計算
│   └── chart/          # グラフ描画用
│
├── components/         # Reactコンポーネント
│   └── Chart/
│
├── store/             # 状態管理
│   └── projectStore.ts
│
└── App.tsx            # メインアプリ
```

## 計算ロジックの検証

計算ロジックが正しいか検証するためのテストスクリプト:

```bash
# テストスクリプトの実行
npx tsx src/lib/__tests__/calculations.test.ts
```

### 検証項目
- ✅ 飽和水蒸気圧の計算（Tetensの式）
- ✅ 絶対湿度の計算
- ✅ エンタルピーの計算
- ✅ 湿球温度の計算（反復法）
- ✅ 加熱プロセス（絶対湿度一定）
- ✅ 冷却プロセス（SHFを考慮）
- ✅ 混合プロセス（風量加重平均）
- ✅ 全熱交換プロセス（効率考慮）

## 使用方法

### 1. 状態点の追加

- 左パネルの「プリセット」ボタンで外気・室内条件を追加
- 「カスタム追加」で任意の温度・湿度の点を追加

### 2. 状態点の編集

- チャート上の点をドラッグして移動
- 点をクリックして選択

### 3. 季節モードの切替

- 「夏季」「冬季」「両方」ボタンで表示を切替
- 各状態点は季節ごとに色分けされる

### 4. データの確認

- 左パネルの「状態点一覧」で詳細を確認
- 温度、相対湿度、絶対湿度が表示される

## ライセンス

MIT

## 作成者

空調設計エンジニア向けツール

## 参考文献

- 空気調和・衛生工学会「空気調和設備の実務の知識」
- 建築設備設計基準
- ASHRAE Fundamentals
